<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>BASS4 ui demo</title>
    <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="menu"></div>
<div id="main"></div>
<script src="/js/jquery/jquery-3.2.0.min.js" type="text/javascript"></script>
<script src="/assets/bootstrap/js/bootstrap.bundle.min.js" type="text/javascript"></script>
<script src="sprintf.js"></script>
<script src="showdown.min.js"></script>
<script src="underscore-min.js" type="text/javascript"></script>
<script src="js.cookie.js" type="text/javascript"></script>
<script src="ui.js" type="text/javascript"></script>
<script src="moment.js" type="text/javascript"></script>
<script src="moment-timezone-with-data.js" type="text/javascript"></script>
<script src="content.js" type="text/javascript"></script>
<script type="text/javascript">
   let load_worksheet = function ($content_div, module_id, worksheet_id) {
      console.log('Fetching worksheet');
      $.ajax('/api/user/tx/module-worksheet/' + module_id + "/" + worksheet_id,
         {
            success: function (worksheet) {
               $content_div.append(content_handler(module_id, worksheet));
            }
         })
   };

   $(document).ready(function () {
      $.when(init_page()).done(function () {
         let $main_div = $('#main');
         let $content_div = $('<div></div>').appendTo($main_div);
         let module_id = parseInt(getParameterByName('module-id', window.location.href));
         let worksheet_id = parseInt(getParameterByName('worksheet-id', window.location.href));
         load_worksheet($content_div, module_id, worksheet_id);
      });
   });
</script>
</body>
</html>
